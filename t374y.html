<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="منصة بث رائدة للمسلسلات الحصرية - استمتع بأفضل المحتوى العربي والعالمي">
    <meta name="keywords" content="مسلسلات, بث مباشر, شاهد اونلاين, دراما, عربيتونز, ستارديما, شاهد VIP">
    <title>سيريز ماكس | منصة المسلسلات الرائدة</title>
    
    <!-- SEO Meta Tags -->
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="سيريز ماكس | منصة المسلسلات الرائدة">
    <meta property="og:description" content="منصة بث رائدة للمسلسلات الحصرية - استمتع بأفضل المحتوى العربي والعالمي">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ar_AR">
    
    <!-- Bootstrap RTL -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-rtl@5.3.0/dist/css/bootstrap-rtl.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    
    <style>
        :root {
            --primary: #e50914;
            --primary-dark: #b20710;
            --primary-light: #ff525d;
            --dark: #141414;
            --darker: #0c0c0c;
            --gray: #808080;
            --light: #f5f5f5;
            --light-gray: #e0e0e0;
            --card-width: 180px;
            --transition: all 0.3s ease;
            --border-radius: 8px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }
        
        body {
            background-color: var(--darker);
            color: var(--light);
            overflow-x: hidden;
            padding-top: 70px;
        }
        
        /* Header Styles */
        .navbar {
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 10%, transparent);
            padding: 10px 20px;
            z-index: 1000;
            transition: background-color 0.4s;
            height: 70px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            align-items: center;
        }
        
        .navbar.scrolled {
            background-color: var(--dark);
            box-shadow: 0 5px 15px rgba(0,0,0,0.7);
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .logo {
            color: var(--primary);
            font-size: 1.8rem;
            font-weight: 900;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo i {
            animation: pulse 2s infinite;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 15px;
        }
        
        .nav-link {
            color: var(--light) !important;
            font-size: 1rem;
            font-weight: 500;
            transition: var(--transition);
            text-decoration: none;
            position: relative;
            padding: 5px 0;
        }
        
        .nav-link:hover {
            color: var(--primary) !important;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .nav-link.active::after {
            width: 100%;
        }
        
        .nav-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .search-container {
            position: relative;
            width: 250px;
        }
        
        .search-box {
            background: rgba(0,0,0,0.75);
            border: 1px solid var(--gray);
            padding: 10px 15px;
            border-radius: 30px;
            color: white;
            width: 100%;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        .search-box:focus {
            width: 300px;
            background: rgba(0,0,0,0.9);
            outline: none;
            border-color: var(--primary);
        }
        
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background: var(--dark);
            border: 1px solid var(--gray);
            border-radius: var(--border-radius);
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.7);
        }
        
        .search-item {
            padding: 10px;
            border-bottom: 1px solid #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: var(--transition);
        }
        
        .search-item:hover {
            background: #333;
        }
        
        .search-item img {
            width: 50px;
            height: 30px;
            object-fit: cover;
            margin-left: 10px;
            border-radius: 4px;
        }
        
        /* Netflix-style Hero Slider */
        .hero-slider {
            height: 100vh;
            position: relative;
            overflow: hidden;
            margin-bottom: 0;
        }
        
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }
        
        .slide.active {
            opacity: 1;
        }
        
        .slide::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.5) 50%, transparent 100%);
        }
        
        .slide-content {
            padding: 0 5%;
            width: 100%;
            max-width: 600px;
            z-index: 1;
            position: relative;
        }
        
        .slide-thumbnail {
            position: absolute;
            right: 5%;
            top: 50%;
            transform: translateY(-50%);
            width: 300px;
            height: 450px;
            object-fit: cover;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            z-index: 2;
        }
        
        .slide-title {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            line-height: 1.2;
        }
        
        .slide-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .slide-rating {
            color: gold;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .slide-year {
            background: rgba(255,255,255,0.2);
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .slide-desc {
            margin-bottom: 30px;
            line-height: 1.6;
            font-size: 1.1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            max-height: 150px;
            overflow: hidden;
        }
        
        .btn-play {
            background-color: var(--primary);
            color: white;
            padding: 12px 30px;
            border-radius: var(--border-radius);
            font-weight: bold;
            font-size: 1.2rem;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-play:hover {
            background-color: var(--primary-dark);
            transform: scale(1.05);
        }
        
        /* Series Grid */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .series-section {
            padding: 0 0 20px;
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            display: inline-block;
        }
        
        .series-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(var(--card-width), 1fr));
            gap: 20px;
        }
        
        .series-card {
            background: #1a1a1a;
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            position: relative;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        
        .series-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0,0,0,0.8);
            z-index: 10;
        }
        
        .series-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
        }
        
        .series-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--primary);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .series-info {
            padding: 15px;
        }
        
        .series-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 8px;
            height: 40px;
            overflow: hidden;
        }
        
        .series-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--gray);
        }
        
        .series-rating {
            color: gold;
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        /* Iframe Container */
        .iframe-container {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--darker);
            z-index: 1000;
            display: none;
            flex-direction: column;
        }
        
        .iframe-wrapper {
            position: relative;
            width: 100%;
            height: 70vh;
            padding: 20px;
            flex-grow: 1;
        }
        
        #seriesIframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: var(--border-radius);
            background-color: #000;
        }
        
        .iframe-header {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding: 15px 20px;
            background: var(--dark);
            border-bottom: 1px solid #333;
        }
        
        /* Recommended Section Below Iframe - Full size cards */
        .iframe-recommended {
            padding: 20px;
            background: var(--dark);
            border-top: 1px solid #333;
            display: none;
        }
        
        .iframe-rec-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--light);
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            display: inline-block;
        }
        
        .iframe-rec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(var(--card-width), 1fr));
            gap: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) var(--dark);
        }
        
        .iframe-rec-grid::-webkit-scrollbar {
            width: 8px;
        }
        
        .iframe-rec-grid::-webkit-scrollbar-track {
            background: var(--dark);
        }
        
        .iframe-rec-grid::-webkit-scrollbar-thumb {
            background-color: var(--primary);
            border-radius: 20px;
        }
        
        /* Featured Series Section */
        .featured-series {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .featured-item {
            position: relative;
            border-radius: var(--border-radius);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        
        .featured-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.8);
        }
        
        .featured-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            display: block;
        }
        
        .featured-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%);
        }
        
        .featured-title {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        
        .featured-rating {
            color: gold;
            font-size: 0.9rem;
        }
        
        /* Buttons Style */
        .view-more, .filter-btn, .btn-back {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: var(--border-radius);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 15px;
        }
        
        .view-more:hover, .filter-btn:hover, .btn-back:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .filter-btn.active {
            background-color: var(--primary-dark);
            box-shadow: 0 0 0 2px var(--primary-light);
        }
        
        /* Recommended Section - Vertical Layout */
        .recommended-section {
            margin-top: 40px;
        }
        
        .rec-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--light);
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            display: inline-block;
        }
        
        .rec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .rec-item {
            background: #1a1a1a;
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        
        .rec-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.8);
        }
        
        .rec-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        
        .rec-info {
            padding: 15px;
        }
        
        .rec-item-title {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .rec-item-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .rec-item-rating {
            color: gold;
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        .rec-item-desc {
            font-size: 0.9rem;
            line-height: 1.5;
            color: var(--light-gray);
            margin-top: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Loading Spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }
        
        /* Protection Overlay */
        .protection-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            padding: 20px;
        }
        
        .protection-icon {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .protection-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .protection-message {
            font-size: 1.2rem;
            max-width: 600px;
            line-height: 1.8;
            margin-bottom: 30px;
        }
        
        /* Orientation Message */
        .orientation-message {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            color: white;
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        /* TV Remote Control Navigation Styles */
        .focusable {
            outline: none;
            transition: all 0.2s ease;
        }
        
        .focused {
            transform: scale(1.05);
            box-shadow: 0 0 0 3px var(--primary-light);
            z-index: 10;
        }
        
        /* Reaction Buttons */
        .reaction-buttons {
            display: none;
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            border-radius: 20px;
            padding: 5px;
            z-index: 100;
        }
        
        .reaction-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .reaction-btn:hover {
            transform: scale(1.3);
        }
        
        .reaction-btn.liked {
            color: #1877f2;
        }
        
        .reaction-btn.loved {
            color: #f02849;
        }
        
        .reaction-btn.sad {
            color: #f7b928;
        }
        
        .reaction-btn.angry {
            color: #f02849;
        }
        
        .reaction-btn.wow {
            color: #f7b928;
        }
        
        /* Responsive Styles with Bootstrap */
        @media (max-width: 1600px) {
            :root {
                --card-width: 220px;
            }
            
            .series-card img {
                height: 300px;
            }
            
            .hero-slider {
                height: 100vh;
            }
            
            .slide-title {
                font-size: 4rem;
            }
            
            .slide-desc {
                font-size: 1.2rem;
                max-width: 60%;
            }
            
            .slide-thumbnail {
                width: 350px;
                height: 525px;
            }
            
            .featured-series {
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            }
            
            .featured-item img {
                height: 220px;
            }
            
            .rec-grid {
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            }
        }
        
        @media (max-width: 1400px) {
            :root {
                --card-width: 200px;
            }
            
            .series-card img {
                height: 280px;
            }
            
            .slide-title {
                font-size: 3.5rem;
            }
            
            .slide-thumbnail {
                width: 300px;
                height: 450px;
            }
        }
        
        @media (max-width: 1200px) {
            :root {
                --card-width: 180px;
            }
            
            .series-card img {
                height: 250px;
            }
            
            .slide-title {
                font-size: 3rem;
            }
            
            .slide-thumbnail {
                width: 250px;
                height: 375px;
            }
            
            .featured-item img {
                height: 200px;
            }
        }
        
        @media (max-width: 992px) {
            :root {
                --card-width: 160px;
            }
            
            .series-grid {
                gap: 15px;
            }
            
            .series-card img {
                height: 220px;
            }
            
            .slide-title {
                font-size: 2.5rem;
            }
            
            .slide-desc {
                font-size: 1rem;
            }
            
            .slide-thumbnail {
                width: 200px;
                height: 300px;
            }
            
            .nav-links {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
            
            .featured-series {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .featured-item img {
                height: 160px;
            }
            
            .rec-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .reaction-buttons {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            :root {
                --card-width: 140px;
            }
            
            .hero-slider {
                height: 80vh;
            }
            
            .slide-title {
                font-size: 2rem;
            }
            
            .slide-content {
                padding: 0 20px;
                max-width: 100%;
            }
            
            .slide-desc {
                font-size: 0.9rem;
                -webkit-line-clamp: 4;
                display: -webkit-box;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }
            
            .slide-thumbnail {
                display: none;
            }
            
            .series-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .series-card img {
                height: 180px;
            }
            
            .search-container {
                width: 180px;
            }
            
            .iframe-rec-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .iframe-wrapper {
                padding: 10px;
                height: 60vh;
            }
            
            .featured-series {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .featured-item img {
                height: 140px;
            }
            
            .rec-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .rec-item img {
                height: 150px;
            }
            
            .reaction-buttons {
                bottom: 5px;
                right: 5px;
                padding: 3px;
            }
            
            .reaction-btn {
                font-size: 1rem;
                margin: 0 3px;
            }
        }
        
        @media (max-width: 576px) {
            :root {
                --card-width: 120px;
            }
            
            .hero-slider {
                height: 70vh;
            }
            
            .slide-title {
                font-size: 1.8rem;
                margin-bottom: 15px;
                line-height: 1.1;
            }
            
            .slide-content {
                padding: 0 15px;
            }
            
            .slide-meta {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .series-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 12px;
            }
            
            .series-card img {
                height: 160px;
            }
            
            .series-info {
                padding: 10px;
            }
            
            .section-title {
                font-size: 1.4rem;
            }
            
            .navbar {
                padding: 10px 15px;
            }
            
            .search-container {
                width: 150px;
            }
            
            .search-box {
                padding: 6px 12px;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            .iframe-wrapper {
                height: 50vh;
                padding: 8px;
            }
            
            .featured-series {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 15px;
            }
            
            .featured-item img {
                height: 120px;
            }
            
            .featured-title {
                font-size: 1rem;
            }
            
            .rec-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
            
            .rec-item img {
                height: 120px;
            }
            
            .reaction-buttons {
                display: none; /* Hide on very small screens */
            }
        }
        
        @media (max-width: 400px) {
            :root {
                --card-width: 110px;
            }
            
            .series-card img {
                height: 140px;
            }
            
            .search-container {
                width: 120px;
            }
            
            .featured-series {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .rec-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
        }
        
        /* Animations */
        .fade-in {
            animation: fadeIn 1s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Mobile Menu */
        .mobile-menu {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: var(--dark);
            padding: 20px;
            transform: translateY(-100%);
            transition: transform 0.4s ease;
            z-index: 999;
            box-shadow: 0 10px 20px rgba(0,0,0,0.7);
        }
        
        .mobile-menu.active {
            transform: translateY(0);
        }
        
        .mobile-menu .nav-links {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Footer */
        .footer {
            background: var(--dark);
            padding: 40px 20px;
            margin-top: 50px;
            border-top: 1px solid #333;
        }
        
        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .footer-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.2rem;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-link {
            color: var(--light-gray);
            padding: 8px 0;
            display: block;
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-link:hover {
            color: var(--primary);
            padding-right: 5px;
        }
        
        .footer-bottom {
            max-width: 1400px;
            margin: 30px auto 0;
            padding-top: 20px;
            border-top: 1px solid #333;
            text-align: center;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* Lazy Loading */
        .lazy {
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .lazy.loaded {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
    </div>

    <!-- Iframe Container for Series -->
    <div class="iframe-container" id="iframeContainer">
        <div class="iframe-wrapper">
            <iframe id="seriesIframe" allowfullscreen></iframe>
        </div>
        <div class="iframe-recommended" id="iframeRecommended">
            <h2 class="iframe-rec-title">مسلسلات مقترحة لك</h2>
            <div class="iframe-rec-grid" id="iframeRecGrid"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo" id="logo">
                <i class="fas fa-play-circle"></i> سيريز ماكس
            </a>
            
            <ul class="nav-links">
                <li><a class="nav-link active" href="#">الصفحة الرئيسية</a></li>
                <li><a class="nav-link" href="#">المسلسلات</a></li>
                <li><a class="nav-link" href="#">الأكثر مشاهدة</a></li>
                <li><a class="nav-link" href="#">المضاف حديثاً</a></li>
                <li><a class="nav-link" href="#">المسلسلات التركية</a></li>
                <li><a class="nav-link" href="#">المسلسلات الكورية</a></li>
            </ul>
            
            <div class="nav-actions">
                <div class="search-container">
                    <input type="text" class="search-box" id="searchInput" placeholder="ابحث عن مسلسل...">
                    <div class="search-results" id="searchResults"></div>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>
    
    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <ul class="nav-links">
            <li><a class="nav-link active" href="#">الصفحة الرئيسية</a></li>
            <li><a class="nav-link" href="#">المسلسلات</a></li>
            <li><a class="nav-link" href="#">الأكثر مشاهدة</a></li>
            <li><a class="nav-link" href="#">المضاف حديثاً</a></li>
            <li><a class="nav-link" href="#">المسلسلات التركية</a></li>
            <li><a class="nav-link" href="#">المسلسلات الكورية</a></li>
        </ul>
    </div>

    <!-- Hero Slider - Netflix Style -->
    <div class="hero-slider" id="heroSlider">
        <!-- Slides will be generated by JavaScript -->
    </div>

    <div class="container">
        <!-- Featured Series -->
        <div class="series-section fade-in">
            <h2 class="section-title">أبرز المسلسلات</h2>
            <div class="featured-series" id="featuredSeries">
                <!-- Featured series will be generated by JS -->
            </div>
        </div>

        <!-- Popular Series Section -->
        <div class="series-section fade-in">
            <h2 class="section-title">المسلسلات الشائعة</h2>
            <div class="series-grid" id="popularSeries">
                <!-- Popular series will be generated by JS -->
            </div>
            <button class="view-more" id="viewMorePopular">
                <i class="fas fa-chevron-left"></i> عرض المزيد
            </button>
        </div>

        <!-- New Series Section -->
        <div class="series-section fade-in delay-1">
            <h2 class="section-title">المسلسلات الحديثة</h2>
            <div class="series-grid" id="newSeries">
                <!-- New series will be generated by JS -->
            </div>
            <button class="view-more" id="viewMoreNew">
                <i class="fas fa-chevron-left"></i> عرض المزيد
            </button>
        </div>
        
        <!-- Turkish Series Section -->
        <div class="series-section fade-in delay-2">
            <h2 class="section-title">المسلسلات التركية</h2>
            <div class="series-grid" id="turkishSeries">
                <!-- Turkish series will be generated by JS -->
            </div>
            <button class="view-more" id="viewMoreTurkish">
                <i class="fas fa-chevron-left"></i> عرض المزيد
            </button>
        </div>
        
        <!-- Recommended For You Section - Vertical Layout -->
        <div class="recommended-section fade-in delay-2">
            <h2 class="rec-title">مقترحة لك</h2>
            <div class="rec-grid" id="recommendedSeries">
                <!-- Recommended items will be generated by JS -->
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>عن سيريز ماكس</h3>
                <p>منصة رائدة في عالم المسلسلات العربية والعالمية، نقدم لك أحدث وأفضل المسلسلات بجودة عالية وترجمة متقنة.</p>
            </div>
            
            <div class="footer-section">
                <h3>روابط مهمة</h3>
                <ul class="footer-links">
                    <li><a href="#" class="footer-link">المسلسلات</a></li>
                    <li><a href="#" class="footer-link">الأكثر مشاهدة</a></li>
                    <li><a href="#" class="footer-link">المضاف حديثاً</a></li>
                    <li><a href="#" class="footer-link">اتصل بنا</a></li>
                    <li><a href="#" class="footer-link">شروط الاستخدام</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            &copy; 2023 سيريز ماكس. جميع الحقوق محفوظة.
        </div>
    </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Enhanced series data with categories and ratings
        const seriesData = [
            // شائعة (12 مسلسل)
            { id: 1, title: "العهد", category: "تاريخي", year: "2023", rating: 9.2, popularity: 95, isNew: false, desc: "مسلسل تاريخي ضخم يجسد حقبة مهمة من تاريخ الدولة الإسلامية", country: "عربي", iframeUrl: "https://stardima.vip/embed/1" },
            { id: 2, title: "شارع 60", category: "دراما", year: "2023", rating: 8.7, popularity: 92, isNew: false, desc: "قصة درامية مؤثرة عن سكان حي شعبي يواجهون تحديات الحياة", country: "عربي", iframeUrl: "https://stardima.vip/embed/2" },
            { id: 3, title: "الأخوة", category: "تشويق", year: "2022", rating: 9.0, popularity: 90, isNew: false, desc: "ثلاثة أشقاء تفرقهم الظروف ليجتمعوا بعد سنوات في مواجهة مصيرية", country: "عربي", iframeUrl: "https://stardima.vip/embed/3" },
            { id: 4, title: "الطبيب", category: "طبي", year: "2023", rating: 8.5, popularity: 88, isNew: false, desc: "قصة طبيب جراح متميز يواجه تحديات مهنية وشخصية صعبة", country: "عربي", iframeUrl: "https://stardima.vip/embed/4" },
            { id: 5, title: "سر المدينة", category: "غموض", year: "2022", rating: 8.9, popularity: 93, isNew: false, desc: "غموض يكتنف مدينة صغيرة بعد سلسلة جرائم غريبة", country: "عربي", iframeUrl: "https://stardima.vip/embed/5" },
            { id: 6, title: "حكايتنا", category: "رومانسي", year: "2023", rating: 8.3, popularity: 85, isNew: false, desc: "قصة حب تتحدى الظروف الاجتماعية في إطار درامي رومانسي", country: "عربي", iframeUrl: "https://stardima.vip/embed/6" },
            { id: 7, title: "الجدار", category: "حربي", year: "2023", rating: 9.1, popularity: 94, isNew: false, desc: "رواية إنسانية مؤثرة خلال أحداث حرب طاحنة", country: "عربي", iframeUrl: "https://stardima.vip/embed/7" },
            { id: 8, title: "الخادمة", category: "رعب", year: "2022", rating: 8.4, popularity: 87, isNew: false, desc: "عائلة تكتشف أن خادمتهم الجديدة تحمل أسراراً مرعبة", country: "عربي", iframeUrl: "https://stardima.vip/embed/8" },
            { id: 9, title: "ملوك الصحراء", category: "أكشن", year: "2023", rating: 8.6, popularity: 89, isNew: false, desc: "صراع قبلي قديم يعود إلى السطح في صحراء الجزيرة العربية", country: "عربي", iframeUrl: "https://stardima.vip/embed/9" },
            { id: 10, title: "عيون القلب", category: "عائلي", year: "2022", rating: 8.2, popularity: 84, isNew: false, desc: "دراما عائلية تلامس قضايا اجتماعية معاصرة", country: "عربي", iframeUrl: "https://stardima.vip/embed/10" },
            { id: 11, title: "الهارب", category: "تشويق", year: "2023", rating: 8.8, popularity: 91, isNew: false, desc: "رجل بريء يهرب من السجن لإثبات براءته", country: "عربي", iframeUrl: "https://stardima.vip/embed/11" },
            { id: 12, title: "أبناء العاصفة", category: "تاريخي", year: "2022", rating: 9.3, popularity: 96, isNew: false, desc: "ملحمة تاريخية عن قبيلة عربية في فترة ما قبل الإسلام", country: "عربي", iframeUrl: "https://stardima.vip/embed/12" },
            
            // حديثة (8 مسلسل)
            { id: 13, title: "البيت الكبير", category: "دراما", year: "2023", rating: 8.7, popularity: 90, isNew: true, desc: "صراعات عائلية داخل قصر فخم تخفي وراءها أسراراً مظلمة", country: "عربي", iframeUrl: "https://stardima.vip/embed/13" },
            { id: 14, title: "ظل الماضي", category: "غموض", year: "2023", rating: 8.5, popularity: 86, isNew: true, desc: "ماضي مظلم يعود ليطارد بطلنا في سلسلة أحداث غامضة", country: "تركي", iframeUrl: "https://stardima.vip/embed/14" },
            { id: 15, title: "الطائر المبكر", category: "كوميدي", year: "2023", rating: 8.0, popularity: 82, isNew: true, desc: "كوميديا اجتماعية تنتقد العادات والتقاليد بفكاهة", country: "تركي", iframeUrl: "https://stardima.vip/embed/15" },
            { id: 16, title: "قلب الأسد", category: "أكشن", year: "2023", rating: 8.9, popularity: 92, isNew: true, desc: "بطل أكشن يواجه شبكة إجرامية خطيرة لإنقاذ حبيبته", country: "تركي", iframeUrl: "https://stardima.vip/embed/16" },
            { id: 17, title: "صيف بارد", category: "رومانسي", year: "2023", rating: 8.4, popularity: 88, isNew: true, desc: "قصة حب صيفية تتحول إلى علاقة مصيرية", country: "تركي", iframeUrl: "https://stardima.vip/embed/17" },
            { id: 18, title: "الغرفة 707", category: "رعب", year: "2023", rating: 8.6, popularity: 89, isNew: true, desc: "فندق قديم تكتنفه أسرار مرعبة وغرفة لا يدخلها أحد", country: "تركي", iframeUrl: "https://stardima.vip/embed/18" },
            { id: 19, title: "الوريث", category: "دراما", year: "2023", rating: 8.7, popularity: 91, isNew: true, desc: "صراع على الميراث داخل عائلة ثرية تكشف عن وجوه حقيقية", country: "تركي", iframeUrl: "https://stardima.vip/embed/19" },
            { id: 20, title: "الضيف", category: "غموض", year: "2023", rating: 8.8, popularity: 93, isNew: true, desc: "ضيف غامض يصل إلى قرية نائية فيغير حياة سكانها", country: "تركي", iframeUrl: "https://stardima.vip/embed/20" },
            
            // تركية (3 مسلسل)
            { id: 21, title: "أميرة الشرق", category: "تاريخي", year: "2023", rating: 9.0, popularity: 94, isNew: true, desc: "قصة أميرة عربية قوية تواجه تحديات الحكم في زمن مضطرب", country: "تركي", iframeUrl: "https://stardima.vip/embed/21" },
            { id: 22, title: "الشارع الخلفي", category: "جريمة", year: "2023", rating: 8.3, popularity: 85, isNew: true, desc: "تحقيق في سلسلة جرائم بشارع صغير تكشف شبكة فساد", country: "تركي", iframeUrl: "https://stardima.vip/embed/22" },
            { id: 23, title: "الرقم الصعب", category: "رياضي", year: "2023", rating: 8.5, popularity: 87, isNew: true, desc: "قصة لاعب كرة قدم موهوب يواجه تحديات داخل الملعب وخارجه", country: "تركي", iframeUrl: "https://stardima.vip/embed/23" },
            
            // مسلسلات إضافية للتوصيات
            { id: 24, title: "أغنية القلب", category: "رومانسي", year: "2023", rating: 8.7, popularity: 90, isNew: true, desc: "قصة حب بين مغنية طموحة وملحن موهوب في عالم الفن", country: "تركي", iframeUrl: "https://stardima.vip/embed/24" },
            { id: 25, title: "المعلم", category: "أكشن", year: "2023", rating: 8.9, popularity: 93, isNew: true, desc: "معلم فنون قتالية يحمي طلابه من عصابة إجرامية", country: "تركي", iframeUrl: "https://stardima.vip/embed/25" },
            { id: 26, title: "المدينة المفقودة", category: "مغامرات", year: "2023", rating: 8.6, popularity: 89, isNew: true, desc: "مغامرة مثيرة للبحث عن مدينة أسطورية مفقودة", country: "تركي", iframeUrl: "https://stardima.vip/embed/26" },
            { id: 27, title: "الظل الأسود", category: "تشويق", year: "2023", rating: 8.8, popularity: 92, isNew: true, desc: "تحقيق في جرائم غامضة ترتكب بواسطة مجهول", country: "تركي", iframeUrl: "https://stardima.vip/embed/27" },
            { id: 28, title: "أحلام اليقظة", category: "دراما", year: "2023", rating: 8.4, popularity: 86, isNew: true, desc: "قصة شاب يحاول تحقيق أحلامه وسط تحديات الحياة", country: "تركي", iframeUrl: "https://stardima.vip/embed/28" },
            { id: 29, title: "الطريق إلى المجد", category: "تاريخي", year: "2023", rating: 9.1, popularity: 95, isNew: true, desc: "ملحمة تاريخية عن صعود إمبراطورية عظيمة", country: "عربي", iframeUrl: "https://stardima.vip/embed/29" },
            { id: 30, title: "أشباح الماضي", category: "رعب", year: "2023", rating: 8.3, popularity: 84, isNew: true, desc: "عائلة تنتقل لمنزل جديد ليكتشفوا أنه مسكون", country: "عربي", iframeUrl: "https://stardima.vip/embed/30" },
            { id: 31, title: "الحب الأول", category: "رومانسي", year: "2023", rating: 8.5, popularity: 87, isNew: true, desc: "قصة حب عذري بين طالبين في الجامعة", country: "عربي", iframeUrl: "https://stardima.vip/embed/31" },
            { id: 32, title: "الاختيار الصعب", category: "دراما", year: "2023", rating: 8.7, popularity: 90, isNew: true, desc: "دراما عائلية تعالج قضايا اجتماعية معاصرة", country: "عربي", iframeUrl: "https://stardima.vip/embed/32" }
        ];

        // Simulate user preferences for recommendations
        const userPreferences = {
            viewed: [1, 3, 7, 12, 16],
            liked: [1, 7, 12, 21],
            favoriteCategories: ["تاريخي", "أكشن", "دراما"],
            clickedSeries: [1, 3, 7, 12, 16, 21],
            reactions: {}
        };

        // TV Remote Control Navigation Variables
        let currentFocus = null;
        let focusableElements = [];
        let currentIndex = 0;

        // Generate stars based on rating
        function generateRatingStars(rating) {
            const stars = Math.round(rating / 2); // Convert 10-point scale to 5-star
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= stars) {
                    starsHTML += '<i class="fas fa-star"></i>';
                } else {
                    starsHTML += '<i class="far fa-star"></i>';
                }
            }
            return starsHTML;
        }

        // Generate series card
        function generateSeriesCard(series, isNew = false) {
            return `
                <div class="series-card focusable" data-id="${series.id}" tabindex="0">
                    ${isNew ? '<span class="series-badge">جديد</span>' : ''}
                    <img src="https://source.unsplash.com/random/300x450/?${series.title.replace(/\s/g,'')},tv,drama" alt="${series.title}" loading="lazy" class="lazy">
                    <div class="series-info">
                        <div class="series-title">${series.title}</div>
                        <div class="series-meta">
                            <span>${series.year}</span>
                            <span class="series-rating">${generateRatingStars(series.rating)}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Generate featured series
        function generateFeaturedSeries() {
            const featuredSeries = [...seriesData].sort((a, b) => b.popularity - a.popularity).slice(0, 5);
            const featuredContainer = document.getElementById('featuredSeries');
            
            featuredSeries.forEach(series => {
                featuredContainer.innerHTML += `
                    <div class="featured-item focusable" data-id="${series.id}" tabindex="0">
                        <img src="https://source.unsplash.com/random/600x400/?${series.title.replace(/\s/g,'')},tv,drama" alt="${series.title}" loading="lazy" class="lazy">
                        <div class="featured-info">
                            <div class="featured-title">${series.title}</div>
                            <div class="featured-rating">${generateRatingStars(series.rating)}</div>
                        </div>
                    </div>
                `;
            });
            
            // Add event listeners to featured items
            document.querySelectorAll('.featured-item').forEach(item => {
                item.addEventListener('click', function() {
                    const seriesId = parseInt(this.getAttribute('data-id'));
                    openSeriesIframe(seriesId);
                    
                    // Track click for recommendations
                    if (!userPreferences.clickedSeries.includes(seriesId)) {
                        userPreferences.clickedSeries.push(seriesId);
                        localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
                    }
                });
            });
        }

        // Generate Netflix-style slider
        function generateSlider() {
            const slider = document.getElementById('heroSlider');
            const popularSeries = [...seriesData].sort((a, b) => b.popularity - a.popularity).slice(0, 5);
            
            let slidesHTML = '';
            popularSeries.forEach((series, index) => {
                slidesHTML += `
                    <div class="slide ${index === 0 ? 'active' : ''}" style="background-image: url('https://source.unsplash.com/random/1920x1080/?${series.title.replace(/\s/g,'')},drama,movie')">
                        <img class="slide-thumbnail lazy" src="https://source.unsplash.com/random/300x450/?${series.title.replace(/\s/g,'')},tv,drama" alt="${series.title}">
                        <div class="slide-content">
                            <h2 class="slide-title">${series.title}</h2>
                            <div class="slide-meta">
                                <div class="slide-rating">${generateRatingStars(series.rating)}</div>
                                <div class="slide-year">${series.year}</div>
                            </div>
                            <p class="slide-desc">${series.desc}</p>
                            <button class="btn-play focusable" data-id="${series.id}" tabindex="0">
                                <i class="fas fa-play"></i> شاهد الآن
                            </button>
                        </div>
                    </div>
                `;
            });
            
            slider.innerHTML = slidesHTML;
            
            // Set slider interval
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            let slideInterval = setInterval(nextSlide, 5000);
            
            function nextSlide() {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }
            
            // Pause slider on hover
            slider.addEventListener('mouseenter', () => {
                clearInterval(slideInterval);
            });
            
            slider.addEventListener('mouseleave', () => {
                slideInterval = setInterval(nextSlide, 5000);
            });
            
            // Add event listeners to play buttons
            document.querySelectorAll('.btn-play').forEach(button => {
                button.addEventListener('click', function() {
                    const seriesId = parseInt(this.getAttribute('data-id'));
                    openSeriesIframe(seriesId);
                });
            });
        }

        // Generate series grid with view more functionality
        function generateSeriesGrid() {
            // Popular Series (12 items)
            const popularSeries = [...seriesData].sort((a, b) => b.popularity - a.popularity).slice(0, 12);
            const popularGrid = document.getElementById('popularSeries');
            popularGrid.innerHTML = '';
            
            popularSeries.forEach(series => {
                popularGrid.innerHTML += generateSeriesCard(series);
            });
            
            // New Series (8 items)
            const newSeries = [...seriesData].filter(s => s.isNew).slice(0, 8);
            const newGrid = document.getElementById('newSeries');
            newGrid.innerHTML = '';
            
            newSeries.forEach(series => {
                newGrid.innerHTML += generateSeriesCard(series, true);
            });
            
            // Turkish Series (3 items)
            const turkishSeries = [...seriesData].filter(s => s.country === "تركي").slice(0, 3);
            const turkishGrid = document.getElementById('turkishSeries');
            turkishGrid.innerHTML = '';
            
            turkishSeries.forEach(series => {
                turkishGrid.innerHTML += generateSeriesCard(series);
            });
            
            // Add event listeners to series cards
            document.querySelectorAll('.series-card').forEach(card => {
                card.addEventListener('click', function() {
                    const seriesId = parseInt(this.getAttribute('data-id'));
                    openSeriesIframe(seriesId);
                    
                    // Track click for recommendations
                    if (!userPreferences.clickedSeries.includes(seriesId)) {
                        userPreferences.clickedSeries.push(seriesId);
                        localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
                    }
                });
            });
            
            // View More Buttons
            document.getElementById('viewMorePopular').addEventListener('click', () => {
                showAllSeries('popular', 'المسلسلات الشائعة');
            });
            
            document.getElementById('viewMoreNew').addEventListener('click', () => {
                showAllSeries('new', 'المسلسلات الحديثة');
            });
            
            document.getElementById('viewMoreTurkish').addEventListener('click', () => {
                showAllSeries('turkish', 'المسلسلات التركية');
            });
        }

        // Show all series in a category
        function showAllSeries(type, title) {
            let allSeries = [];
            
            if (type === 'popular') {
                allSeries = [...seriesData].sort((a, b) => b.popularity - a.popularity);
            } else if (type === 'new') {
                allSeries = [...seriesData].filter(s => s.isNew);
            } else if (type === 'turkish') {
                allSeries = [...seriesData].filter(s => s.country === "تركي");
            }
            
            // Hide all sections
            document.querySelectorAll('.series-section').forEach(el => el.style.display = 'none');
            
            // Create all series container
            const allSeriesContainer = document.createElement('div');
            allSeriesContainer.className = 'series-section';
            allSeriesContainer.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 class="section-title">${title}</h2>
                    <button class="btn-back focusable" id="backToHome" tabindex="0">
                        <i class="fas fa-arrow-left"></i> العودة للصفحة الرئيسية
                    </button>
                </div>
                <div class="series-grid" id="allSeriesGrid"></div>
            `;
            
            document.querySelector('.container').appendChild(allSeriesContainer);
            
            // Generate all series
            const allSeriesGrid = document.getElementById('allSeriesGrid');
            allSeries.forEach(series => {
                allSeriesGrid.innerHTML += generateSeriesCard(series, series.isNew);
            });
            
            // Add event listeners to series cards
            document.querySelectorAll('.series-card').forEach(card => {
                card.addEventListener('click', function() {
                    const seriesId = parseInt(this.getAttribute('data-id'));
                    openSeriesIframe(seriesId);
                });
            });
            
            // Add event listener to back button
            document.getElementById('backToHome').addEventListener('click', function() {
                allSeriesContainer.remove();
                document.querySelectorAll('.series-section').forEach(el => el.style.display = 'block');
                
                // Scroll to top after returning
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            // Initialize TV remote navigation for this page
            initTVNavigation();
        }

        // Advanced recommendation algorithm
        function getRecommendations(currentSeriesId = null) {
            const currentSeries = currentSeriesId ? seriesData.find(s => s.id === currentSeriesId) : null;
            
            // Combine different factors for recommendations with weights
            const recommendations = [];
            const recommendationScores = {};
            
            // 1. Based on currently watching series (highest weight)
            if (currentSeries) {
                // Same category
                seriesData.filter(s => 
                    s.category === currentSeries.category && 
                    s.id !== currentSeries.id
                ).forEach(s => {
                    if (!recommendationScores[s.id]) {
                        recommendationScores[s.id] = 0;
                    }
                    recommendationScores[s.id] += 40; // High weight for same category
                });
                
                // Same country
                seriesData.filter(s => 
                    s.country === currentSeries.country && 
                    s.id !== currentSeries.id
                ).forEach(s => {
                    if (!recommendationScores[s.id]) {
                        recommendationScores[s.id] = 0;
                    }
                    recommendationScores[s.id] += 30; // Medium weight for same country
                });
            }
            
            // 2. Based on user's liked series
            userPreferences.liked.forEach(id => {
                const series = seriesData.find(s => s.id === id);
                if (series) {
                    // Find series in the same category
                    seriesData.filter(s => 
                        s.category === series.category && 
                        s.id !== series.id
                    ).forEach(s => {
                        if (!recommendationScores[s.id]) {
                            recommendationScores[s.id] = 0;
                        }
                        recommendationScores[s.id] += 25;
                    });
                }
            });
            
            // 3. Based on user's clicked series (medium weight)
            userPreferences.clickedSeries.forEach(id => {
                const series = seriesData.find(s => s.id === id);
                if (series) {
                    seriesData.filter(s => 
                        s.category === series.category && 
                        s.id !== series.id
                    ).forEach(s => {
                        if (!recommendationScores[s.id]) {
                            recommendationScores[s.id] = 0;
                        }
                        recommendationScores[s.id] += 20;
                    });
                }
            });
            
            // 4. Based on popularity (low weight)
            seriesData.forEach(s => {
                if (!recommendationScores[s.id]) {
                    recommendationScores[s.id] = 0;
                }
                recommendationScores[s.id] += s.popularity / 5;
            });
            
            // Convert scores to array and sort
            const scoredSeries = Object.keys(recommendationScores).map(id => {
                return {
                    id: parseInt(id),
                    score: recommendationScores[id]
                };
            });
            
            scoredSeries.sort((a, b) => b.score - a.score);
            
            // Get top 23 unique recommendations
            const uniqueRecs = [];
            const ids = new Set();
            
            // First add series not viewed yet
            for (const item of scoredSeries) {
                if (!userPreferences.viewed.includes(item.id)) {
                    const series = seriesData.find(s => s.id === item.id);
                    if (series) {
                        uniqueRecs.push(series);
                        ids.add(series.id);
                    }
                    if (uniqueRecs.length >= 23) break;
                }
            }
            
            // If not enough, add viewed series
            if (uniqueRecs.length < 23) {
                for (const item of scoredSeries) {
                    if (!ids.has(item.id)) {
                        const series = seriesData.find(s => s.id === item.id);
                        if (series) {
                            uniqueRecs.push(series);
                            ids.add(series.id);
                        }
                        if (uniqueRecs.length >= 23) break;
                    }
                }
            }
            
            return uniqueRecs;
        }

        // Generate recommended series
        function generateRecommendedSeries(currentSeriesId = null) {
            const recommendedSeries = getRecommendations(currentSeriesId);
            const recContainer = document.getElementById('recommendedSeries');
            recContainer.innerHTML = '';
            
            recommendedSeries.forEach(series => {
                recContainer.innerHTML += `
                    <div class="rec-item focusable" data-id="${series.id}" tabindex="0">
                        <img src="https://source.unsplash.com/random/300x450/?${series.title.replace(/\s/g,'')},tv" alt="${series.title}" loading="lazy" class="lazy">
                        <div class="rec-info">
                            <div class="rec-item-title">${series.title}</div>
                            <div class="rec-item-meta">
                                <span>${series.year}</span>
                                <span class="rec-item-rating">${generateRatingStars(series.rating)}</span>
                            </div>
                            <div class="rec-item-desc">${series.desc}</div>
                        </div>
                    </div>
                `;
            });
            
            // Add event listeners to recommended items
            document.querySelectorAll('.rec-item').forEach(item => {
                item.addEventListener('click', function() {
                    const seriesId = parseInt(this.getAttribute('data-id'));
                    openSeriesIframe(seriesId);
                    
                    // Track click for recommendations
                    if (!userPreferences.clickedSeries.includes(seriesId)) {
                        userPreferences.clickedSeries.push(seriesId);
                        localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
                    }
                });
            });
        }
        
        // Generate recommended series for iframe
        function generateIframeRecommended(currentSeriesId = null) {
            const recommendedSeries = getRecommendations(currentSeriesId);
            const recContainer = document.getElementById('iframeRecGrid');
            recContainer.innerHTML = '';
            
            // Ensure we show exactly 23 recommended items
            const seriesToShow = recommendedSeries.slice(0, 23);
            
            seriesToShow.forEach(series => {
                recContainer.innerHTML += generateSeriesCard(series);
            });
            
            // Add event listeners to series cards
            document.querySelectorAll('#iframeRecGrid .series-card').forEach(card => {
                card.addEventListener('click', function() {
                    const seriesId = parseInt(this.getAttribute('data-id'));
                    openSeriesIframe(seriesId);
                    
                    // Track click for recommendations
                    if (!userPreferences.clickedSeries.includes(seriesId)) {
                        userPreferences.clickedSeries.push(seriesId);
                        localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
                    }
                });
            });
            
            // Initialize TV navigation for iframe recommendations
            initTVNavigation();
        }
        
        // Open series in iframe
        function openSeriesIframe(seriesId) {
            const series = seriesData.find(s => s.id === seriesId);
            if (!series) return;
            
            // Show loading spinner
            document.getElementById('loadingSpinner').style.display = 'flex';
            
            // Set iframe source
            document.getElementById('seriesIframe').src = series.iframeUrl;
            
            // Show iframe container and recommended section
            document.getElementById('iframeContainer').style.display = 'flex';
            document.getElementById('iframeRecommended').style.display = 'block';
            
            // Generate recommendations for iframe
            generateIframeRecommended(seriesId);
            
            // Hide loading spinner when iframe is ready
            document.getElementById('seriesIframe').onload = function() {
                document.getElementById('loadingSpinner').style.display = 'none';
                
                // Add reaction buttons after iframe loads
                addReactionButtons(seriesId);
            };
            
            // Track as viewed
            if (!userPreferences.viewed.includes(series.id)) {
                userPreferences.viewed.push(series.id);
                localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
            }
            
            // Scroll to top
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            
            // Initialize TV navigation for iframe
            initTVNavigation();
        }
        
        // Add reaction buttons to iframe
        function addReactionButtons(seriesId) {
            const iframeWrapper = document.querySelector('.iframe-wrapper');
            
            const reactionsHTML = `
                <div class="reaction-buttons" id="reactionButtons">
                    <button class="reaction-btn ${userPreferences.reactions[seriesId] === 'like' ? 'liked' : ''}" data-reaction="like" title="أعجبني">
                        <i class="fas fa-thumbs-up"></i>
                    </button>
                    <button class="reaction-btn ${userPreferences.reactions[seriesId] === 'love' ? 'loved' : ''}" data-reaction="love" title="أحببته">
                        <i class="fas fa-heart"></i>
                    </button>
                    <button class="reaction-btn ${userPreferences.reactions[seriesId] === 'sad' ? 'sad' : ''}" data-reaction="sad" title="محزن">
                        <i class="fas fa-sad-tear"></i>
                    </button>
                    <button class="reaction-btn ${userPreferences.reactions[seriesId] === 'angry' ? 'angry' : ''}" data-reaction="angry" title="أغضبني">
                        <i class="fas fa-angry"></i>
                    </button>
                    <button class="reaction-btn ${userPreferences.reactions[seriesId] === 'wow' ? 'wow' : ''}" data-reaction="wow" title="رائع">
                        <i class="fas fa-surprise"></i>
                    </button>
                </div>
            `;
            
            iframeWrapper.insertAdjacentHTML('beforeend', reactionsHTML);
            
            // Show reaction buttons
            document.getElementById('reactionButtons').style.display = 'flex';
            
            // Add event listeners to reaction buttons
            document.querySelectorAll('.reaction-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const reaction = this.getAttribute('data-reaction');
                    
                    // Remove all active classes from buttons
                    document.querySelectorAll('.reaction-btn').forEach(b => {
                        b.classList.remove('liked', 'loved', 'sad', 'angry', 'wow');
                    });
                    
                    // Add active class to clicked button
                    this.classList.add(reaction);
                    
                    // Save reaction
                    userPreferences.reactions[seriesId] = reaction;
                    localStorage.setItem('userPreferences', JSON.stringify(userPreferences));
                });
            });
        }
        
        // Close iframe
        function closeIframe() {
            document.getElementById('iframeContainer').style.display = 'none';
            document.getElementById('seriesIframe').src = '';
            
            // Remove reaction buttons
            const reactionButtons = document.getElementById('reactionButtons');
            if (reactionButtons) {
                reactionButtons.remove();
            }
            
            // Return focus to main content
            initTVNavigation();
        }

        // TV Remote Control Navigation
        function initTVNavigation() {
            // Get all focusable elements
            focusableElements = Array.from(document.querySelectorAll('.focusable'));
            
            // Reset current index
            currentIndex = 0;
            
            // Remove focus from all elements
            focusableElements.forEach(el => el.classList.remove('focused'));
            
            // Set focus to first element if available
            if (focusableElements.length > 0) {
                currentFocus = focusableElements[0];
                currentFocus.classList.add('focused');
                currentFocus.focus();
            }
            
            // Add keyboard event listener for navigation
            document.addEventListener('keydown', handleTVRemoteNavigation);
        }
        
        function handleTVRemoteNavigation(e) {
            if (!focusableElements.length) return;
            
            // Prevent default behavior for arrow keys
            if ([37, 38, 39, 40, 13].includes(e.keyCode)) {
                e.preventDefault();
            }
            
            switch(e.keyCode) {
                case 37: // Left arrow
                    navigateTV(-1, 'row');
                    break;
                case 38: // Up arrow
                    navigateTV(-1, 'column');
                    break;
                case 39: // Right arrow
                    navigateTV(1, 'row');
                    break;
                case 40: // Down arrow
                    navigateTV(1, 'column');
                    break;
                case 13: // Enter/OK button
                    if (currentFocus) {
                        currentFocus.click();
                    }
                    break;
                case 8: // Back button
                case 27: // Escape button
                    if (document.getElementById('iframeContainer').style.display === 'flex') {
                        closeIframe();
                    }
                    break;
            }
        }
        
        function navigateTV(direction, axis) {
            if (!currentFocus) return;
            
            // Remove focus from current element
            currentFocus.classList.remove('focused');
            
            // Get current element position
            const rect = currentFocus.getBoundingClientRect();
            const currentX = rect.left + (rect.width / 2);
            const currentY = rect.top + (rect.height / 2);
            
            // Find closest element in the specified direction
            let closestElement = null;
            let closestDistance = Infinity;
            
            focusableElements.forEach(el => {
                if (el === currentFocus) return;
                
                const elRect = el.getBoundingClientRect();
                const elX = elRect.left + (elRect.width / 2);
                const elY = elRect.top + (elRect.height / 2);
                
                // Calculate distance based on axis
                let distance, isInDirection;
                
                if (axis === 'row') {
                    // Horizontal navigation
                    distance = Math.abs(elY - currentY);
                    isInDirection = (direction === 1 && elX > currentX) || (direction === -1 && elX < currentX);
                } else {
                    // Vertical navigation
                    distance = Math.abs(elX - currentX);
                    isInDirection = (direction === 1 && elY > currentY) || (direction === -1 && elY < currentY);
                }
                
                // Check if element is in the right direction and closer than current closest
                if (isInDirection && distance < closestDistance) {
                    closestDistance = distance;
                    closestElement = el;
                }
            });
            
            // If no element found in direction, wrap around
            if (!closestElement) {
                currentIndex = (currentIndex + direction + focusableElements.length) % focusableElements.length;
                closestElement = focusableElements[currentIndex];
            } else {
                currentIndex = focusableElements.indexOf(closestElement);
            }
            
            // Set new focus
            currentFocus = closestElement;
            currentFocus.classList.add('focused');
            currentFocus.focus();
            
            // Scroll into view if needed
            currentFocus.scrollIntoView({
                behavior: 'smooth',
                block: 'nearest'
            });
        }

        // Advanced Content Protection System
        function setupContentProtection() {
            // 1. Disable right-click for images only
            document.querySelectorAll('img').forEach(img => {
                img.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                    showProtectionMessage();
                });
            });
            
            // 2. Detect print screen key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'PrintScreen') {
                    e.preventDefault();
                    showProtectionMessage();
                }
            });
            
            // 3. Detect iframe embedding attempts
            if (window.self !== window.top) {
                const allowedDomain = 'turkify.netlify.app';
                const currentDomain = window.location.hostname;
                
                if (document.referrer.indexOf(allowedDomain) === -1 && 
                    window.top.location.hostname !== allowedDomain) {
                    showProtectionMessage();
                    // Block the iframe
                    try {
                        window.top.location = 'about:blank';
                    } catch (e) {
                        document.body.innerHTML = '<h1 style="color:white;text-align:center;padding:50px;">Turkify refused Connect</h1>';
                    }
                }
            }
            
            // 4. Detect common scraping techniques
            const detector = document.createElement('div');
            detector.id = 'protectionDetector';
            detector.style.cssText = 'position:absolute;left:-9999px;width:1px;height:1px;';
            document.body.appendChild(detector);
            
            if (detector.offsetParent === null || 
                detector.offsetLeft === 0 || 
                detector.offsetTop === 0) {
                showProtectionMessage();
            }
            
            // 5. Detect dev tools opening
            const devtools = /./;
            devtools.toString = function() {
                showProtectionMessage();
                return '';
            };
            
            console.log('%c', devtools);
            
            // 6. Detect copy attempts
            document.addEventListener('copy', function(e) {
                if (window.getSelection().toString().length > 10) {
                    e.preventDefault();
                    showProtectionMessage();
                }
            });
            
            // 7. Detect F12 and Ctrl+Shift+I
            document.addEventListener('keydown', function(e) {
                if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                    e.preventDefault();
                    showProtectionMessage();
                }
            });
            
            // 8. Detect console usage
            const originalConsoleLog = console.log;
            console.log = function() {
                showProtectionMessage();
                originalConsoleLog.apply(console, arguments);
            };
        }
        
        // Show protection message
        function showProtectionMessage() {
            document.getElementById('protectionOverlay').style.display = 'flex';
        }

        // Mobile menu toggle
        function setupMobileMenu() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            
            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('active');
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mobileMenu.contains(e.target) && e.target !== mobileMenuBtn) {
                    mobileMenu.classList.remove('active');
                }
            });
        }

        // Search functionality
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');
            
            searchInput.addEventListener('input', function() {
                const query = this.value.trim().toLowerCase();
                
                if (query.length < 2) {
                    searchResults.style.display = 'none';
                    return;
                }
                
                // Filter series based on search query
                const results = seriesData.filter(series => 
                    series.title.toLowerCase().includes(query)
                ).slice(0, 10);
                
                if (results.length > 0) {
                    searchResults.innerHTML = '';
                    
                    results.forEach(series => {
                        const item = document.createElement('div');
                        item.className = 'search-item';
                        item.innerHTML = `
                            <img src="https://source.unsplash.com/random/300x450/?${series.title.replace(/\s/g,'')},tv,drama" alt="${series.title}" loading="lazy" class="lazy">
                            <div>
                                <div>${series.title}</div>
                                <small>${series.year} • ${series.category}</small>
                            </div>
                        `;
                        
                        item.addEventListener('click', function() {
                            openSeriesIframe(series.id);
                            searchResults.style.display = 'none';
                            searchInput.value = '';
                        });
                        
                        searchResults.appendChild(item);
                    });
                    
                    searchResults.style.display = 'block';
                } else {
                    searchResults.innerHTML = '<div class="search-item">لا توجد نتائج</div>';
                    searchResults.style.display = 'block';
                }
            });
            
            // Close search results when clicking outside
            document.addEventListener('click', function(e) {
                if (e.target !== searchInput && !searchResults.contains(e.target)) {
                    searchResults.style.display = 'none';
                }
            });
        }
        
        // Lazy loading images
        function setupLazyLoading() {
            const lazyImages = document.querySelectorAll('.lazy');
            
            const lazyLoad = function() {
                lazyImages.forEach(img => {
                    if (img.getBoundingClientRect().top <= window.innerHeight + 100 && 
                        img.getBoundingClientRect().bottom >= 0 && 
                        getComputedStyle(img).display !== 'none') {
                        img.src = img.getAttribute('src');
                        img.classList.add('loaded');
                    }
                });
            };
            
            // Initial load
            lazyLoad();
            
            // Load on scroll
            document.addEventListener('scroll', lazyLoad);
            window.addEventListener('resize', lazyLoad);
            window.addEventListener('orientationchange', lazyLoad);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            // Load user preferences from local storage
            const savedPreferences = localStorage.getItem('userPreferences');
            if (savedPreferences) {
                Object.assign(userPreferences, JSON.parse(savedPreferences));
            }
            
            // Generate content
            generateSlider();
            generateSeriesGrid();
            generateFeaturedSeries();
            generateRecommendedSeries();
            
            // Set up content protection
            setupContentProtection();
            
            // Set up mobile menu
            setupMobileMenu();
            
            // Set up search functionality
            setupSearch();
            
            // Set up lazy loading
            setupLazyLoading();
            
            // Add scroll effect to navbar
            window.addEventListener('scroll', () => {
                const navbar = document.querySelector('.navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
                
                // Trigger lazy loading on scroll
                setupLazyLoading();
            });
            
            // Check for URL parameters to open a specific series
            const urlParams = new URLSearchParams(window.location.search);
            const seriesId = urlParams.get('series');
            
            if (seriesId) {
                const series = seriesData.find(s => s.id === parseInt(seriesId));
                if (series) {
                    openSeriesIframe(series.id);
                }
            }
            
            // Initialize TV remote navigation
            initTVNavigation();
            
            // Check device orientation
            function checkOrientation() {
                if (window.innerHeight > window.innerWidth) {
                    document.getElementById('orientationMessage').style.display = 'flex';
                } else {
                    document.getElementById('orientationMessage').style.display = 'none';
                }
            }
            
            window.addEventListener('resize', checkOrientation);
            checkOrientation();
        });
    </script>
</body>
</html>
